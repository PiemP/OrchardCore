var editor;function initializeTemplatePreview(e,t){var o=$("[name='__RequestVerificationToken']").val();sendFormData=function(e){var t={Name:e.value,Content:editor.getValue(),__RequestVerificationToken:o};localStorage.setItem("OrchardCore.templates",JSON.stringify($.param(t)))},(editor=CodeMirror.fromTextArea(t,{autoRefresh:!0,lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:{name:"liquid"}})).on("change",(function(t){sendFormData(e)})),window.addEventListener("storage",(function(t){"OrchardCore.templates:ready"==t.key&&sendFormData(e)}),!1),$(e).on("input",(function(){sendFormData(e)})).on("propertychange",(function(){sendFormData(e)})).on("change",(function(){sendFormData(e)})).on("keyup",(function(t){(46==t.keyCode||t.ctrlKey)&&sendFormData(e)})),$(window).on("unload",(function(){localStorage.removeItem("OrchardCore.templates"),localStorage.setItem("OrchardCore.templates:not-connected",""),localStorage.removeItem("OrchardCore.templates:not-connected")}))}
